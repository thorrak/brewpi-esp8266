<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>brewpi-esp8266: PiStream&lt; StreamType &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">brewpi-esp8266
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="#pri-static-attribs">Static Private Attributes</a> &#124;
<a href="classPiStream-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">PiStream&lt; StreamType &gt; Class Template Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Template for abstracting low level Stream interaction details.  
 <a href="classPiStream.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="PiStream_8h_source.html">PiStream.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for PiStream&lt; StreamType &gt;:</div>
<div class="dyncontent">
<div class="center"><img src="classPiStream__inherit__graph.png" border="0" usemap="#aPiStream_3_01StreamType_01_4_inherit__map" alt="Inheritance graph"/></div>
<map name="aPiStream_3_01StreamType_01_4_inherit__map" id="aPiStream_3_01StreamType_01_4_inherit__map">
<area shape="rect" title="Template for abstracting low level Stream interaction details." alt="" coords="5,5,173,31"/>
<area shape="rect" href="classPiLink.html" title="Interface between brewpi controller and the outside world (Commonly a RaspberryPi,..." alt="" coords="14,79,165,104"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a07fbcbf698630105e751339720d49c6f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPiStream.html#a07fbcbf698630105e751339720d49c6f">PiStream</a> (StreamType &amp;<a class="el" href="classPiStream.html#a05630267d3a03d00ca0a4b34864183d1">stream</a>)</td></tr>
<tr class="memdesc:a07fbcbf698630105e751339720d49c6f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor.  <br /></td></tr>
<tr class="separator:a07fbcbf698630105e751339720d49c6f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac0ba213e9f6694fa5e02cc23dfdd63c4"><td class="memItemLeft" align="right" valign="top"><a id="ac0ba213e9f6694fa5e02cc23dfdd63c4" name="ac0ba213e9f6694fa5e02cc23dfdd63c4"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>read</b> ()</td></tr>
<tr class="memdesc:ac0ba213e9f6694fa5e02cc23dfdd63c4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read data from the stream. <br /></td></tr>
<tr class="separator:ac0ba213e9f6694fa5e02cc23dfdd63c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab4e9deed9fd2c2e5f88cd9b162a0d3c3"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPiStream.html#ab4e9deed9fd2c2e5f88cd9b162a0d3c3">readPersistent</a> (const int timeout=10)</td></tr>
<tr class="memdesc:ab4e9deed9fd2c2e5f88cd9b162a0d3c3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read from the Stream, waiting if nothing is yet available to read.  <br /></td></tr>
<tr class="separator:ab4e9deed9fd2c2e5f88cd9b162a0d3c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4463fb89a778da5921e78d93bfc0b828"><td class="memItemLeft" align="right" valign="top"><a id="a4463fb89a778da5921e78d93bfc0b828" name="a4463fb89a778da5921e78d93bfc0b828"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>print</b> (const char out)</td></tr>
<tr class="memdesc:a4463fb89a778da5921e78d93bfc0b828"><td class="mdescLeft">&#160;</td><td class="mdescRight">Print a single char. <br /></td></tr>
<tr class="separator:a4463fb89a778da5921e78d93bfc0b828"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a67c72bfa24ddaa86c06a49f5c5608f2f"><td class="memItemLeft" align="right" valign="top"><a id="a67c72bfa24ddaa86c06a49f5c5608f2f" name="a67c72bfa24ddaa86c06a49f5c5608f2f"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>print</b> (const char *out)</td></tr>
<tr class="memdesc:a67c72bfa24ddaa86c06a49f5c5608f2f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Print a C-str. <br /></td></tr>
<tr class="separator:a67c72bfa24ddaa86c06a49f5c5608f2f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe501b0c8aea49b8c208c144ec93c74b"><td class="memItemLeft" align="right" valign="top"><a id="afe501b0c8aea49b8c208c144ec93c74b" name="afe501b0c8aea49b8c208c144ec93c74b"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>print</b> (const String out)</td></tr>
<tr class="memdesc:afe501b0c8aea49b8c208c144ec93c74b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Print a String. <br /></td></tr>
<tr class="separator:afe501b0c8aea49b8c208c144ec93c74b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f69f534cb9318fc7479e07ff2f6e68f"><td class="memItemLeft" align="right" valign="top"><a id="a3f69f534cb9318fc7479e07ff2f6e68f" name="a3f69f534cb9318fc7479e07ff2f6e68f"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>print</b> (const std::string out)</td></tr>
<tr class="memdesc:a3f69f534cb9318fc7479e07ff2f6e68f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Print a C++ String. <br /></td></tr>
<tr class="separator:a3f69f534cb9318fc7479e07ff2f6e68f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad6a1a867126189d8eab51c3bcc424685"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPiStream.html#ad6a1a867126189d8eab51c3bcc424685">print_P</a> (const char *fmt,...)</td></tr>
<tr class="memdesc:ad6a1a867126189d8eab51c3bcc424685"><td class="mdescLeft">&#160;</td><td class="mdescRight">A printf like interface. Format string stored in PROGMEM.  <br /></td></tr>
<tr class="separator:ad6a1a867126189d8eab51c3bcc424685"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78cc31848a1458bed6072544cfea78c6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPiStream.html#a78cc31848a1458bed6072544cfea78c6">print_fmt</a> (const char *fmt,...)</td></tr>
<tr class="memdesc:a78cc31848a1458bed6072544cfea78c6"><td class="mdescLeft">&#160;</td><td class="mdescRight">A printf like interface to the Arduino Serial function. Format string stored in RAM.  <br /></td></tr>
<tr class="separator:a78cc31848a1458bed6072544cfea78c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52cbbabd3f6d9fcf64d4708b0363614c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPiStream.html#a52cbbabd3f6d9fcf64d4708b0363614c">printNewLine</a> ()</td></tr>
<tr class="memdesc:a52cbbabd3f6d9fcf64d4708b0363614c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Print new line.  <br /></td></tr>
<tr class="separator:a52cbbabd3f6d9fcf64d4708b0363614c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa1ca843b7fb2464bf20bafaf0e439333"><td class="memItemLeft" align="right" valign="top"><a id="aa1ca843b7fb2464bf20bafaf0e439333" name="aa1ca843b7fb2464bf20bafaf0e439333"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>connected</b> ()</td></tr>
<tr class="memdesc:aa1ca843b7fb2464bf20bafaf0e439333"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if stream is conected. <br /></td></tr>
<tr class="separator:aa1ca843b7fb2464bf20bafaf0e439333"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3331d06aa1eb3be26374b54ce1d6b50"><td class="memItemLeft" align="right" valign="top"><a id="ac3331d06aa1eb3be26374b54ce1d6b50" name="ac3331d06aa1eb3be26374b54ce1d6b50"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>available</b> ()</td></tr>
<tr class="memdesc:ac3331d06aa1eb3be26374b54ce1d6b50"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if data is available for reading. <br /></td></tr>
<tr class="separator:ac3331d06aa1eb3be26374b54ce1d6b50"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa94c343d765a67723e7ce18797766501"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPiStream.html#aa94c343d765a67723e7ce18797766501">sendJsonMessage</a> (const char prefix, const JsonDocument &amp;doc)</td></tr>
<tr class="memdesc:aa94c343d765a67723e7ce18797766501"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a JSON document with an optional prefix.  <br /></td></tr>
<tr class="separator:aa94c343d765a67723e7ce18797766501"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5cef5684ffbc8a4d7b616dfcda6d2865"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPiStream.html#a5cef5684ffbc8a4d7b616dfcda6d2865">sendSingleItemJsonMessage</a> (const char prefix, JsonDocument &amp;doc)</td></tr>
<tr class="memdesc:a5cef5684ffbc8a4d7b616dfcda6d2865"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unpack a single item array.  <br /></td></tr>
<tr class="separator:a5cef5684ffbc8a4d7b616dfcda6d2865"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ad0e52aea584a72b413dbf890fc9570"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPiStream.html#a6ad0e52aea584a72b413dbf890fc9570">receiveJsonMessage</a> (JsonDocument &amp;doc)</td></tr>
<tr class="memdesc:a6ad0e52aea584a72b413dbf890fc9570"><td class="mdescLeft">&#160;</td><td class="mdescRight">Parse JSON coming from the stream.  <br /></td></tr>
<tr class="separator:a6ad0e52aea584a72b413dbf890fc9570"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a654a4527754360917cf94f254e59dcd6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPiStream.html#a654a4527754360917cf94f254e59dcd6">operator bool</a> ()</td></tr>
<tr class="memdesc:a654a4527754360917cf94f254e59dcd6"><td class="mdescLeft">&#160;</td><td class="mdescRight">bool operator  <br /></td></tr>
<tr class="separator:a654a4527754360917cf94f254e59dcd6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f70872f75018a564a0cf57d3aa326e4"><td class="memTemplParams" colspan="2"><a id="a4f70872f75018a564a0cf57d3aa326e4" name="a4f70872f75018a564a0cf57d3aa326e4"></a>
template&lt;typename U  = StreamType&gt; </td></tr>
<tr class="memitem:a4f70872f75018a564a0cf57d3aa326e4"><td class="memTemplItemLeft" align="right" valign="top">std::enable_if&lt;!std::is_same&lt; U, HardwareSerial &gt;::value &amp;&amp;!std::is_same&lt; U, WiFiClient &gt;::value &gt;::type&#160;</td><td class="memTemplItemRight" valign="bottom"><b>init</b> ()</td></tr>
<tr class="memdesc:a4f70872f75018a564a0cf57d3aa326e4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Empty init for all other stream types types. <br /></td></tr>
<tr class="separator:a4f70872f75018a564a0cf57d3aa326e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a302834bbde5b17a2b168581f64e0b0be"><td class="memTemplParams" colspan="2">template&lt;typename U  = StreamType&gt; </td></tr>
<tr class="memitem:a302834bbde5b17a2b168581f64e0b0be"><td class="memTemplItemLeft" align="right" valign="top">std::enable_if&lt; std::is_same&lt; U, WiFiClient &gt;::value &gt;::type&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classPiStream.html#a302834bbde5b17a2b168581f64e0b0be">init</a> ()</td></tr>
<tr class="memdesc:a302834bbde5b17a2b168581f64e0b0be"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize WiFi Stream.  <br /></td></tr>
<tr class="separator:a302834bbde5b17a2b168581f64e0b0be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa361482b12d1ffa4a5e35459a0e594ba"><td class="memTemplParams" colspan="2"><a id="aa361482b12d1ffa4a5e35459a0e594ba" name="aa361482b12d1ffa4a5e35459a0e594ba"></a>
template&lt;typename U  = StreamType&gt; </td></tr>
<tr class="memitem:aa361482b12d1ffa4a5e35459a0e594ba"><td class="memTemplItemLeft" align="right" valign="top">std::enable_if&lt; std::is_same&lt; U, HardwareSerial &gt;::value &gt;::type&#160;</td><td class="memTemplItemRight" valign="bottom"><b>init</b> ()</td></tr>
<tr class="memdesc:aa361482b12d1ffa4a5e35459a0e594ba"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize Serial Stream. <br /></td></tr>
<tr class="separator:aa361482b12d1ffa4a5e35459a0e594ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-methods" name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:af463834c2ca8b57f3b70c80029677ea0"><td class="memTemplParams" colspan="2"><a id="af463834c2ca8b57f3b70c80029677ea0" name="af463834c2ca8b57f3b70c80029677ea0"></a>
template&lt;typename U  = StreamType&gt; </td></tr>
<tr class="memitem:af463834c2ca8b57f3b70c80029677ea0"><td class="memTemplItemLeft" align="right" valign="top">std::enable_if&lt;!std::is_same&lt; U, WiFiClient &gt;::value, bool &gt;::type&#160;</td><td class="memTemplItemRight" valign="bottom"><b>_bool</b> ()</td></tr>
<tr class="memdesc:af463834c2ca8b57f3b70c80029677ea0"><td class="mdescLeft">&#160;</td><td class="mdescRight">_bool implementation for non WiFiClient Streams <br /></td></tr>
<tr class="separator:af463834c2ca8b57f3b70c80029677ea0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a45a1e4e8bb8dc172908058e4c06e1ac9"><td class="memTemplParams" colspan="2">template&lt;typename U  = StreamType&gt; </td></tr>
<tr class="memitem:a45a1e4e8bb8dc172908058e4c06e1ac9"><td class="memTemplItemLeft" align="right" valign="top">std::enable_if&lt; std::is_same&lt; U, WiFiClient &gt;::value, bool &gt;::type&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classPiStream.html#a45a1e4e8bb8dc172908058e4c06e1ac9">_bool</a> ()</td></tr>
<tr class="memdesc:a45a1e4e8bb8dc172908058e4c06e1ac9"><td class="mdescLeft">&#160;</td><td class="mdescRight">_bool implementation for WiFiClient Streams  <br /></td></tr>
<tr class="separator:a45a1e4e8bb8dc172908058e4c06e1ac9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:af9870d35be24319285f3f5dce7d97365"><td class="memItemLeft" align="right" valign="top">char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPiStream.html#af9870d35be24319285f3f5dce7d97365">intBuff</a> [<a class="el" href="namespaceConfig_1_1PiLink.html#a5f510feaf6cab8d017fa2175df30b72a">Config::PiLink::intBufferSize</a>()]</td></tr>
<tr class="memdesc:af9870d35be24319285f3f5dce7d97365"><td class="mdescLeft">&#160;</td><td class="mdescRight">Buffer used for printf operations.  <br /></td></tr>
<tr class="separator:af9870d35be24319285f3f5dce7d97365"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a12e02dd88bfa338b85eecd2ee75b7af3"><td class="memItemLeft" align="right" valign="top"><a id="a12e02dd88bfa338b85eecd2ee75b7af3" name="a12e02dd88bfa338b85eecd2ee75b7af3"></a>
uint16_t&#160;</td><td class="memItemRight" valign="bottom"><b>intBuffOn</b></td></tr>
<tr class="separator:a12e02dd88bfa338b85eecd2ee75b7af3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7efdc4038d22375d7c807a82e51605e4"><td class="memItemLeft" align="right" valign="top">StreamType &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPiStream.html#a7efdc4038d22375d7c807a82e51605e4">upstream</a></td></tr>
<tr class="memdesc:a7efdc4038d22375d7c807a82e51605e4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reference to the wrapped StreamType object.  <br /></td></tr>
<tr class="separator:a7efdc4038d22375d7c807a82e51605e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05630267d3a03d00ca0a4b34864183d1"><td class="memItemLeft" align="right" valign="top">WriteBufferingStream&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPiStream.html#a05630267d3a03d00ca0a4b34864183d1">stream</a></td></tr>
<tr class="memdesc:a05630267d3a03d00ca0a4b34864183d1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stream used for communications.  <br /></td></tr>
<tr class="separator:a05630267d3a03d00ca0a4b34864183d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-static-attribs" name="pri-static-attribs"></a>
Static Private Attributes</h2></td></tr>
<tr class="memitem:a1fb9296d8b7c480c6722b0f2787de947"><td class="memItemLeft" align="right" valign="top">static char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPiStream.html#a1fb9296d8b7c480c6722b0f2787de947">printfBuff</a> [<a class="el" href="namespaceConfig_1_1PiLink.html#a20669788c2f9069185d23bebef73aea2">Config::PiLink::printfBufferSize</a>]</td></tr>
<tr class="memdesc:a1fb9296d8b7c480c6722b0f2787de947"><td class="mdescLeft">&#160;</td><td class="mdescRight">Buffer used for printf operations.  <br /></td></tr>
<tr class="separator:a1fb9296d8b7c480c6722b0f2787de947"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><div class="compoundTemplParams">template&lt;typename StreamType&gt;<br />
class PiStream&lt; StreamType &gt;</div><p>Template for abstracting low level Stream interaction details. </p>
<p>This encapsulates the differences required when using different Stream implementations. Writes are buffered when <a class="el" href="namespaceConfig_1_1PiLink.html#afbbd867005479196b73e62be272ac7a5" title="Buffer data coming out of PiLink.">Config::PiLink::bufferPrints</a> is true. StreamType must be something that implements the Stream API (like Serial) The default is written for Serial. See specializations for other implementations </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a07fbcbf698630105e751339720d49c6f" name="a07fbcbf698630105e751339720d49c6f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a07fbcbf698630105e751339720d49c6f">&#9670;&#160;</a></span>PiStream()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename StreamType &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classPiStream.html">PiStream</a>&lt; StreamType &gt;<a class="el" href="classPiStream.html">::PiStream</a> </td>
          <td>(</td>
          <td class="paramtype">StreamType &amp;&#160;</td>
          <td class="paramname"><em>stream</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Constructor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stream</td><td>- Reference to the Stream object used for communications </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a45a1e4e8bb8dc172908058e4c06e1ac9" name="a45a1e4e8bb8dc172908058e4c06e1ac9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a45a1e4e8bb8dc172908058e4c06e1ac9">&#9670;&#160;</a></span>_bool()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename StreamType &gt; </div>
<div class="memtemplate">
template&lt;typename U  = StreamType&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::enable_if&lt; std::is_same&lt; U, WiFiClient &gt;::value, bool &gt;::type <a class="el" href="classPiStream.html">PiStream</a>&lt; StreamType &gt;::_bool </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>_bool implementation for WiFiClient Streams </p>
<p>This checks both the bool operator of the underlying Stream and its <a class="el" href="classPiStream.html#aa1ca843b7fb2464bf20bafaf0e439333" title="Check if stream is conected.">connected()</a> method </p>

</div>
</div>
<a id="a302834bbde5b17a2b168581f64e0b0be" name="a302834bbde5b17a2b168581f64e0b0be"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a302834bbde5b17a2b168581f64e0b0be">&#9670;&#160;</a></span>init()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename StreamType &gt; </div>
<div class="memtemplate">
template&lt;typename U  = StreamType&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::enable_if&lt; std::is_same&lt; U, WiFiClient &gt;::value &gt;::type <a class="el" href="classPiStream.html">PiStream</a>&lt; StreamType &gt;::init </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initialize WiFi Stream. </p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__wifi.html#ga1e96c7f1b935af54670cafb599329ebd" title="Initialize the telnet server.">initWifiServer()</a> </dd></dl>

</div>
</div>
<a id="a654a4527754360917cf94f254e59dcd6" name="a654a4527754360917cf94f254e59dcd6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a654a4527754360917cf94f254e59dcd6">&#9670;&#160;</a></span>operator bool()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename StreamType &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classPiStream.html">PiStream</a>&lt; StreamType &gt;::operator bool </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>bool operator </p>
<p>This dispatches to a private <a class="el" href="classPiStream.html#af463834c2ca8b57f3b70c80029677ea0" title="_bool implementation for non WiFiClient Streams">_bool()</a> method for easier templating </p><dl class="section see"><dt>See also</dt><dd><a class="el" href="classPiStream.html#af463834c2ca8b57f3b70c80029677ea0" title="_bool implementation for non WiFiClient Streams">_bool()</a> </dd></dl>

</div>
</div>
<a id="a78cc31848a1458bed6072544cfea78c6" name="a78cc31848a1458bed6072544cfea78c6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a78cc31848a1458bed6072544cfea78c6">&#9670;&#160;</a></span>print_fmt()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename StreamType &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classPiStream.html">PiStream</a>&lt; StreamType &gt;::print_fmt </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>fmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>A printf like interface to the Arduino Serial function. Format string stored in RAM. </p>
<p>This was originally named print, but it is ambiguous with the other <a class="el" href="classPiStream.html#a4463fb89a778da5921e78d93bfc0b828" title="Print a single char.">print()</a> methods (because the variadic could match 0 args, which then looks the same as <a class="el" href="classPiStream.html#a67c72bfa24ddaa86c06a49f5c5608f2f" title="Print a C-str.">print(const char*)</a></p>
<p>I was going to use a <a href="https://stackoverflow.com/questions/41860736/how-to-disambiguate-a-variadic-function-with-another-in-c">template solution</a> to disambiguate this from <a class="el" href="classPiStream.html#a4463fb89a778da5921e78d93bfc0b828" title="Print a single char.">print()</a>, but there is a <a href="https://gcc.gnu.org/bugzilla/show_bug.cgi?id=41933">bug in gcc before v4.9</a> that prevents that kind of template from working. As a cheap workaround, I'm renaming the method. If the toolchain gets updated in the future, revisiting the template would be a good idea.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fmt</td><td>- sprintf format string </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ad6a1a867126189d8eab51c3bcc424685" name="ad6a1a867126189d8eab51c3bcc424685"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad6a1a867126189d8eab51c3bcc424685">&#9670;&#160;</a></span>print_P()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename StreamType &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classPiStream.html">PiStream</a>&lt; StreamType &gt;::print_P </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>fmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>A printf like interface. Format string stored in PROGMEM. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fmt</td><td>- PROGMEM stored sprintf format string </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a52cbbabd3f6d9fcf64d4708b0363614c" name="a52cbbabd3f6d9fcf64d4708b0363614c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a52cbbabd3f6d9fcf64d4708b0363614c">&#9670;&#160;</a></span>printNewLine()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename StreamType &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classPiStream.html">PiStream</a>&lt; StreamType &gt;::printNewLine </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Print new line. </p>
<p>Flushes the buffer, if buffering was enabled. </p>

</div>
</div>
<a id="ab4e9deed9fd2c2e5f88cd9b162a0d3c3" name="ab4e9deed9fd2c2e5f88cd9b162a0d3c3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab4e9deed9fd2c2e5f88cd9b162a0d3c3">&#9670;&#160;</a></span>readPersistent()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename StreamType &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classPiStream.html">PiStream</a>&lt; StreamType &gt;::readPersistent </td>
          <td>(</td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>timeout</em> = <code>10</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Read from the Stream, waiting if nothing is yet available to read. </p>
<p>If data isn't immediately available, continue to poll until some data is. The stream will be polled for data every millisecond, up until the timeout.</p>
<dl class="section return"><dt>Returns</dt><dd>Data from Stream, or if no data is received before timeout, -1 </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">timeout</td><td>- How long to wait for data, in milliseconds </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a6ad0e52aea584a72b413dbf890fc9570" name="a6ad0e52aea584a72b413dbf890fc9570"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6ad0e52aea584a72b413dbf890fc9570">&#9670;&#160;</a></span>receiveJsonMessage()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename StreamType &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classPiStream.html">PiStream</a>&lt; StreamType &gt;::receiveJsonMessage </td>
          <td>(</td>
          <td class="paramtype">JsonDocument &amp;&#160;</td>
          <td class="paramname"><em>doc</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Parse JSON coming from the stream. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">doc</td><td>- Reference to a JsonDocument to populate. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aa94c343d765a67723e7ce18797766501" name="aa94c343d765a67723e7ce18797766501"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa94c343d765a67723e7ce18797766501">&#9670;&#160;</a></span>sendJsonMessage()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename StreamType &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classPiStream.html">PiStream</a>&lt; StreamType &gt;::sendJsonMessage </td>
          <td>(</td>
          <td class="paramtype">const char&#160;</td>
          <td class="paramname"><em>prefix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const JsonDocument &amp;&#160;</td>
          <td class="paramname"><em>doc</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Send a JSON document with an optional prefix. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">prefix</td><td>- Used to indicate to the receiving end the nature of the message </td></tr>
    <tr><td class="paramname">doc</td><td>- Reference to JsonDocument that should be sent </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a5cef5684ffbc8a4d7b616dfcda6d2865" name="a5cef5684ffbc8a4d7b616dfcda6d2865"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5cef5684ffbc8a4d7b616dfcda6d2865">&#9670;&#160;</a></span>sendSingleItemJsonMessage()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename StreamType &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classPiStream.html">PiStream</a>&lt; StreamType &gt;::sendSingleItemJsonMessage </td>
          <td>(</td>
          <td class="paramtype">const char&#160;</td>
          <td class="paramname"><em>prefix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">JsonDocument &amp;&#160;</td>
          <td class="paramname"><em>doc</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Unpack a single item array. </p>
<p>This allows client code to always generate arrays, even if there is only going to be a single object. This is used to unpack that single object into the top level root before serializing over the stream.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">prefix</td><td>- Used to indicate to the receiving end the nature of the message </td></tr>
    <tr><td class="paramname">doc</td><td>- Reference to JsonDocument that should be sent </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="af9870d35be24319285f3f5dce7d97365" name="af9870d35be24319285f3f5dce7d97365"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af9870d35be24319285f3f5dce7d97365">&#9670;&#160;</a></span>intBuff</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename StreamType &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">char <a class="el" href="classPiStream.html">PiStream</a>&lt; StreamType &gt;::intBuff[<a class="el" href="namespaceConfig_1_1PiLink.html#a5f510feaf6cab8d017fa2175df30b72a">Config::PiLink::intBufferSize</a>()]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Buffer used for printf operations. </p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="namespaceConfig_1_1PiLink.html#a20669788c2f9069185d23bebef73aea2" title="Size of buffer used for printf.">Config::PiLink::printfBufferSize</a> </dd></dl>

</div>
</div>
<a id="a1fb9296d8b7c480c6722b0f2787de947" name="a1fb9296d8b7c480c6722b0f2787de947"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1fb9296d8b7c480c6722b0f2787de947">&#9670;&#160;</a></span>printfBuff</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">char <a class="el" href="classPiStream.html">PiStream</a>&lt; T &gt;::printfBuff</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Buffer used for printf operations. </p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="namespaceConfig_1_1PiLink.html#a20669788c2f9069185d23bebef73aea2" title="Size of buffer used for printf.">Config::PiLink::printfBufferSize</a> </dd></dl>

</div>
</div>
<a id="a05630267d3a03d00ca0a4b34864183d1" name="a05630267d3a03d00ca0a4b34864183d1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a05630267d3a03d00ca0a4b34864183d1">&#9670;&#160;</a></span>stream</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename StreamType &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">WriteBufferingStream <a class="el" href="classPiStream.html">PiStream</a>&lt; StreamType &gt;::stream</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Stream used for communications. </p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000001">Todo:</a></b></dt><dd>To aid debugging, we could enable the ReadLoggingStream feature of StreamUtils and have it dump the content to the serial interface when we're in WiFi mode (because it shouldn't cause any interfearance with real comms). The docs for DerserializationError has an example (<a href="https://arduinojson.org/v6/api/misc/deserializationerror/">https://arduinojson.org/v6/api/misc/deserializationerror/</a>)</dd></dl>
<p>This may be tricky to combine with the write buffering, that's why I haven't done it yet. </p>

</div>
</div>
<a id="a7efdc4038d22375d7c807a82e51605e4" name="a7efdc4038d22375d7c807a82e51605e4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7efdc4038d22375d7c807a82e51605e4">&#9670;&#160;</a></span>upstream</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename StreamType &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">StreamType&amp; <a class="el" href="classPiStream.html">PiStream</a>&lt; StreamType &gt;::upstream</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reference to the wrapped StreamType object. </p>
<p>This is used for type specific interactions. Generic Stream usage is done via stream; </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>src/<a class="el" href="PiStream_8h_source.html">PiStream.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6
</small></address>
</body>
</html>
